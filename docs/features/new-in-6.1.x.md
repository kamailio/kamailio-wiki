# Kamailio SIP Server - New Features in 6.1.x Version

**Previous version was 6.0.x (released on Jan 2025), see
what was new in that release at**:

- <https://www.kamailio.org/wikidocs/features/new-in-6.0.x/>

*This is a draft of new features added in devel version,
manually updated, thus not always synchronized with what is new in
source code repository.*

## New Modules

### auth_arnacon

- https://www.kamailio.org/docs/modules/devel/modules/auth_arnacon.html

### auth_web3

- https://www.kamailio.org/docs/modules/devel/modules/auth_web3.html

### peerstate

- https://www.kamailio.org/docs/modules/devel/modules/peerstate.html

### ptimer

- https://www.kamailio.org/docs/modules/devel/modules/ptimer.html

## New in existing Modules

### app_python3s

- added `threads_mode` parameter

### auth

- support for password hasing with SHA512

### cdp

- **vrf** optional attribute on Acceptor and Peer definitions allowing [Virtual Routing and Forwarding](https://docs.kernel.org/networking/vrf.html) to be used in that socket.

### cfgutils

- **lock** family functions got another optional key parameter to
  generate the hash id. See [#3808](https://github.com/kamailio/kamailio/pull/3808)
  or [cfgutils docs](https://www.kamailio.org/docs/modules/devel/modules/cfgutils.html)
  for details

### dispatcher

- added ping socket configuration

### dmq

- added `remove_inactive` parameter

### dmq_usrloc

- new modparam to sync `UL_CONTACT_EXPIRE` actions
- new modparam for `cflags` replication

### kex

-  add `KDMQ` to request statistic

### nathelper

- modparam to not send ping to Path

### outbound

- encode bind address into flow token as destination

### permissions

- **allow_register_include_port()**, the permissions module got a new function, which extends
  a functionality for checking contacts (locations) allowed to be registered.
  With a newer function one has a possibility to include Contact URI port into this check.
  See [#3846](https://github.com/kamailio/kamailio/pull/3846)
  or [permissions docs](https://www.kamailio.org/docs/modules/devel/modules/permissions.html)
  for details.

### pua_dialoginfo

- **use_uuid** optional parameter to generate pres_id using libuuid via uuid module

### pua_json

- add support for `as-feature-event`

### pv

- new transformation `{uri.rmparam,name}`

### rabbitmq

- kamailio init will not fail if rabbitmq connection doesn't work. The module will try to reconnect
  when **rabbitmq_publish()** or **rabbitmq_publish_consume()** are called in the config.

### sca

- **from_uri_avp** **to_uri_avp** module parameters adding the possibility of define what is the URI value
  for To and/or From instead of the values coming from the SIP message.

### siputils

- **sip_p_charging_vector()** Once a new PCV has been generated by 'g' or 'f' the PCV cannot be changed
  again.
  The icid-generated-at parameter of a generated PCV will now be set to the sending interface IP address
  The function now returns a status value about what was done.

- **$pcv(status)** New pseudo-variable parameter. Returns whether the PCV header was successfully parsed,
  deleted, newly generated or other.
  See [#3929](https://github.com/kamailio/kamailio/pull/3846)
  or [siputils](https://www.kamailio.org/docs/modules/devel/modules/siputils.html)
  for details.

- `contact_param_encode_alias()` - function to encode contact with alias

### sl

- stats for 1xx replies

### tcpops

- `tcp_con_alive()`- function to check if a connection is alive by remote `addr:port`

### tm

- new modparam `delayed_reply`
- rpc commands for sending requests without automatic ACK
- `tm.retransmit_reply` rpc command
- rpc command `tm.retransmit_reply_callid`

### topoh

- added `$th(ecallid)` - return encoded call id

## Archived Modules

modules considered obsolete and not maintained have been moved to
<https://github.com/kamailio/kamailio-archive/>

- app_java
- db_berkeley
- db_perlvdb

## New in Core

- VRF [Virtual Routing and Forwarding](https://docs.kernel.org/networking/vrf.html) support in socket definition
- `ksrxrand` - framework to set custom rand/srand functions
- `coreparam[name]` - generic core parameter definition
- new `coreparam[random_engine]` to control rand api
- added option `o` for `loadmodule`
- allow `route(...)` usage inside `onsend_route` block

### Command line arguments

- `--domain=val` - match the config parameter as alternative to alias
- `--iuid=val` - set instance unique id via cli parameter

### Interpreter

### Parameters

- `msg_apply_changes_mode` - control if message changes are applied before transaction is created
- `msg_clone_extra_size` - specify extra size in bytes to be allocated for message buffer when cloning it
- `tcp_listen_backlog` - allows to set the value for tcp listen backlog
- `tcp_main_threads` - control the tcp main process working threads
- `tls_connection_match_domain` - tls connection domain matching
- `coreparam[name]=value` - generic core parameter definition

### Functions

### Memory Managers

### Architecture

### kamailio.cfg

## Tools

### kamcmd

### kamctl

### kamdbctl

### kamcli
